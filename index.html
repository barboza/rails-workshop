<!DOCTYPE html>

<html>
  <head>
    <title>RailsGirls - Workshop</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="https://github.com/downloads/gnab/remark/remark-0.4.2.min.js" type="text/javascript">
      {"highlightStyle": "monokai",
       "highlightLanguage": "ruby" }
    </script>
    <style type="text/css" media="screen">
      @import url(http://fonts.googleapis.com/css?family=Ubuntu:400,500);
      @import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);

      body { 
        font-family: 'Ubuntu';
        font-weight: 400;
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: 400;
        margin: 5px;
      }
      h1 { font-size: 4em; }
      h2 { font-size: 2.3em; }
      h3 { font-size: 1.6em; }
      body { font-size: 1.5em; }

      .slide .content {
        padding: 10px 90px !important;
      }

      #slideshow .no-highlight {
        font-size: 1em !important;
      }

      blockquote {
        font-style: italic;
        margin: 0.25em 0;
        padding: 0.25em 40px;
        line-height: 1.45;
        position: relative;
      }

      blockquote:before {
        opacity: 0.8;
        display: block;
        content: "\201C";
        font-size: 3em;
        position: absolute;
        left: -20px;
        top: -20px;
      }

      blockquote cite {
        opacity: 0.8;
        font-size: 1em;
        display: block;
        margin-top: 5px;
      }
 
      blockquote cite:before {
        content: "\2014 \2009";
      }

     /* Two-column layout */
    .left-column {
      width: 50%;
      float: left;
    }
    .right-column {
      width: 50%;
      float: right;
    }

    code {
      -moz-border-radius: 5px;
      -web-border-radius: 5px;
      background: #e7e8e2;
      border-radius: 5px;
    }

    .inverse {
      background: #A60A17;
    }

    /* slides */

    .bg-red {
      background: #A60A17;
    }
    .bg-dark {
      color: white;
      text-shadow: 0 0 20px #333;
    }

    </style>
  </head>
  <body>
    <textarea id="source">

name: inverse
class: center, middle, bg-red, bg-dark
layout: true
---
# Ruby
---
layout: false

## Agenda
* Intro
* Common Data Types
* Declaring variables/constants
* Collections
* Flow control
* Blocks and Procs
* Declaring Methods
* Declaring Classes
* Type of variable
* Declaring Modules
---
template: inverse

## Ambiente

---
layout: false

REPL - [http://repl.it/languages/Ruby](http://repl.it/languages/Ruby)

--

``` bash
$ irb
(irb)> print 'Hello World!'
# Hello World!
```
---
template: inverse

## Intro

---

##

---
template: inverse
## Declaring variables/constants

---

## Variables

```
nome = "Beltrana"
_posição_no_ranking = 7
```
--

lowercase!
```
valueA = 1233
value2 = 5793
```
--

```
sum = valueA + value2
```
---

## Constants
```
(irb)> Name = "John"
(irb)> Name = "João"
# warning: already initialized constant Name
```
--

```
(irb)> Name == "João"
# true
```
--

```
PI = 3.141592653589793
A_CONSTANT = "test"
(irb)> TRUE
# true
```
---
## Methods

```
print
print()
print "Hello World!"
print("Hello World!")
print("Hello", " ", "World", "!")
```
--

```
puts "Nome:"
puts "Olá #{gets}!"
```
```
puts "Nome:"
nome = gets
puts "Olá #{nome}!"
```
---
template: inverse
## Common Data Types
---
## Numbers
```
(irb)> 5 + 2 ** 2     # 9
(irb)> 10 - 4 / - 2   # 12
(irb)> (10 - 4) / - 2 # -3
(irb)> 35 % 6         # 5
```
--

```
(irb)> 1.34 + 0.123   # 1.463
```
--

```
(irb)> 1_747_182.34   # 1747182.34
```
--

```
(irb)> 3 > 5          # false
(irb)> 10 <=> 20      # - 1
(irb)> 1 == 1         # true
(irb)> 1 != 1         # false
```
---
## Numbers
```
(irb)> 0.zero?        # serious?
(irb)> 2.even?        # true
(irb)> 0.odd?         # false
(irb)> 12123.to_s     # "12123"
(irb)> (1+2).next.next # 5
```
--

```
(irb)> 1.class        # Fixnum
(irb)> 0.1.class      # Float
```
--

```
(irb)> 1_000_000_000_000_000_000_000.class # Bignum
```

---
## String  
```
"Hello World!"
'Olá Mundo!'
```
--

```
(irb)> "The result is #{5 ** 2}"
"The result is 25"
```
--

```
"Oi \"Mundo\"!"
```
--

```
(irb)> "The result is \#{5 ** 2}"
# "The result is \#{5 ** 2}" 
```
--

```
(irb)> "Olá " + "Mundo"
# "Olá Mundo"
```

--

```
(irb)> '1' * 5
# 11111
(irb)> 'Ê!' * 5
# Ê!Ê!Ê!Ê!Ê!
```
---
## String  
```
(irb)> "home".include? "ome"  # true
(irb)> "home".length          # 4
(irb)> "home".gsub("e","E")   # "homE"
(irb)> "  home  ".rstrip      # "  home"
(irb)> "home".count("o")      # 1
```
--

```
(irb)> "2".to_i               # 2
(irb)> "2".to_f               # 2.0
(irb)> "2".rjust(5,"0")       # 00002
```
---
## Symbol
```
:home

{{content}}
```
--
:"my home"
:"1"
--

### Unique
```
(irb)> Symbol.all_symbols.size # 2626
(irb)> :home
(irb)> Symbol.all_symbols.size # 2627
(irb)> :home
(irb)> Symbol.all_symbols.size # 2627
```
--

### Immutable
```
(irb)> :home.capitalize
(irb)> Symbol.all_symbols.size # 2628
```

---
## nil

### void, nada!
--

```
(irb)> car = nil
(irb)> car.gas!
# NoMethodError: undefined method `gas!' for nil:NilClass
{{content}}
```
--
(irb)> car.class
# NilClass
--

## true/false

```
true != false     # true
false.to_s        # "false" ‘nuf said…
true.class        # TrueClass
```

---
template: inverse
## Collections  
---
## Array  
```
things = [1,"hi", 33, :test]
```
--

```
print things[0]
# 1
{{content}}
```
--
things.at(2)
things.fetch(10, "Nope!")
things[-3]
things.values_at(1,3)
{{content}}
--

things << "anything"
things.insert(-1,3)
things.push 7
{{content}}
--

things + ["abc"]
things * 2
things.join(", ")
{{content}}
--

things.pop
things.shift
things.delete_at 4
things.delete 4
{{content}}
---
## Array   
```
%w(toy horse apple)
# ["toy", "horse", "apple"]
Array.new(3,2)
# [2,2,2]
```
---
## Range
```
0..10
{{content}}
```
--
Range.new(2,5) # 2..5
--

```
(0...10).include? 10
# false
```
--

```
(50...10_012_821.84) === 8192912
# true
```
--

```
(1..1_000_000_000).to_a.reverse
```
--

```
Date.today..Date.today.next_year
"A".."Z"
```
--

```
(-1..10).class
# Range
```
---
## Hash
```
pages = {home: "index.html", about: "page2.html"}
{{content}}
```
--
pages[:home]  # "index.html"
pages["home"] # nil
--

```
# Ruby 1.8.*
pages = {:home => "index.html", :about => "page2.html"}
```
--

```
things = {:oi => "Hello!", "um" => 1, 1.2 => Float, abc: %w(a b c)}

{{content}}
```
--
things[1.2]       # Float
things[:abc][1]   # "b"
--

```
simple = {a: 1, b: 2}

{{content}}
```
--
simple.values   # [1,2]
simple.keys     # [:a, :b]
simple.to_a     # [[:a, 1], [:b, 2]]

{{content}}
--
simple[:c] = 3
---
## Hash  
```
options = {color: "green", width: 20}
config  = {database: "mysql"}
```
--

```
display_title("Book 2", options)
```
--

```
default = {color: "blue", height: 30}
default.merge(options)  # {:color=>"green", :height=>30, :width=>20}
```
--

```
h = Hash.new("empty...")
h[:a] = 1
print h[:a]   # 1
print h[:b]   # empty...
```
---
template: inverse

## Flow Control

---
template: inverse

## Flow Control
## 1. Conditionals

---
## if / else / elsif
```
result = "whoops"
if gets.to_i == 3
  result = "yay"
end
puts result
```
--

```
result = "whoops"
result = "yay" if gets.to_i == 3
puts result
```
--

```
if gets.to_i == 3
  puts "yay"
else
  puts "whoops"
end
```
--

```
puts gets.to_i == 3 ? "yay" : "whoops"
```
--

```
if gets.to_i == 3 then puts "yay" else puts "whoops" end
```
---
## if / else / elsif

```
input = gets.to_i
if input == 3
  puts "yay"
elsif [2,4].include? input
  puts "almost!"
else
  puts "whoops"
end
```
--

```
if nil
  print "nil"
elsif false
  print "false"
elsif ""
  print "empty"
elsif 0
  print "zero"
else
  print "nada"
end
```
--

```
# warning: string literal in condition
# empty
```
---
## unless

```
print 'Hello!' unless Time.now.year > 2015
```
--

```
print 'Hello!' if not Time.now.year > 2015
```
--

```
unless Time.now.year > 2015
  print "Hello!"
else
  print "Good bye!"
end
```

---
## case
```
value = rand(10) + 1
case value
  when 1      then "UHH!"
  when 2,3    then "uhh!"
  when 4,5,6  then "meh"
  when 7,8    then "yay!"
  when 9,10   then "gold medal"
end
```
--

```
value = rand(10) + 1
case value
  when 1
    "UHH!"
  when 2,3
    "uhh!"
  when 4,5,6
    "meh"
  when 7,8
    "yay"
  when 9,10
    "gold medal"
end
```
---
## case  
```
value = ["apple", "jackfruit"][rand(2)]
print case value
  when "apple"
    "1 real"
  when "jackfruit"
    "10 real"
end
```
--

```
year = Time.now.year
case
  when year > 2015
    print "Hello!"
  else
    print "Good bye!"
end
```
---
template: inverse

## Challenge!
---
## Challenge!

Given a number sequence as input, calculate:
* Min value
* Number of elments
* Average value

Example: "6, 9, 15, -2, 92, 11"
* -2

---
template: inverse

## Flow Control
## 2. Loops
---
## Loop
```
loop do
  puts 'infinite!' {{content}}
end
```
--

  break
--

```
word = "water"
loop {
  word.chop! # remove último caractere
  break if word.empty?
}
```
---
## while

```
word = "water"
while(word.size > 0) do
  word.chop!
end
```
--

```
word = "water"
begin
  word.chop!
end while(word.size > 0)

```
---
## until

```
word = "water"
begin
  word.chop!
end until(word.empty?)
```
--

```
word = "water"
until(word.empty?) do
  word.chop!
end
```
---
## for
```
word = "water"
for char in "water".chars do
  puts char
end
```
--

```
for char in "A".."Z" do
  puts char
end
```
--

```
for key, value in {a: 1, b: 2} do
  puts "#{key} => #{key}"
end
```
---
template: inverse
## Blocks e Procs
---
## Blocks
--

```
word = "water"
for gota in word.chars do
  puts gota
end
```
--

```
word.each_char do |gota|
  puts gota
end
```
--

```
10.times { print 'Ê' }

10.times do
  print 'Ê'
end

10.times {|i| puts i}
```
--

```
["Dr. Fulano", "Dr. Sicrano"]{{content}}
```
--
.all?{|pro| pro.start_with?("Dr.")} #true
---
## Proc

```
{{content}}Proc.new {|pro| pro.start_with?("Dr.")}
```
--
validacao = 
--

```
validacao.call
{{content}}
```
--
# NoMethodError: undefined method `start_with?' for nil:NilClass
--

```
validacao.call("Mestre Jackson") # false
```
--

```
Proc.new do |email, telefone|
  email.include?("@") && telefone.include?("73")
end
```
---
template: inverse
## Challenge [?]  
--

## 5?
---
## Challenge [5]

```
things = [{nome: "Zeca", idade: 2}, {nome: "Amijubi", idade: 1}, 0,
  [6,5,4], (7..10), 3]
```

* Imprima todos os pares em ordem decrescente.

--

### Dicas:

* `each`, `each_value`, `sort`.
```
print "{coisa} é um inteiro par" if coisa.is_a?(Fixnum) and coisa.even?
```
```
case coisa
  when Array, Range
    coisa.each do |value|
      #... 
    end
  when Hash #...
  #...
end
```
---
## Possíveis soluções

```
things = [{nome: "Zeca", idade: 2}, {nome: "Amijubi", idade: 1}, 0,
  [6,5,4], (7..10), 3]
pares = []

things.each do |coisa|
  case coisa
    when Fixnum then pares << coisa if coisa.even?
{{content}}
```
--
    when Array, Range
      coisa.each do |value|
        pares << value if value.even?
      end
{{content}}
--
    when Hash
      coisa.each_value do |value|
        pares << value if value.is_a?(Fixnum) and value.even?
      end
  end
end
puts pares.sort.reverse
---
## Possíveis soluções

```
things = [{nome: "Zeca", idade: 2}, {nome: "Amijubi", idade: 1}, 0,
  [6,5,4], (7..10), 3]
  pares = []

{{content}}
```
--
pegador_de_par = Proc.new do |value|
  pares << value if value.is_a?(Fixnum) and value.even?
end

{{content}}
--
things.each do |coisa|
  case coisa
    when Fixnum then pegador_de_par.call(coisa)
{{content}}
--
    when Hash
      coisa.each_value &pegador_de_par
    when Array, Range
      coisa.each &pegador_de_par
  end
end

puts pares.sort.reverse
---

template: inverse
## Methods
---
## Definindo métodos

```
def print_sum(value1, value2)
  print value1 + value2
end
print_sum(10,21)
```
--

```
print media(10,30)
```
--

```
def media(value1, value2)
  return (value1 + value2) / 2
end

def media(value1, value2)
  (value1 + value2) / 2 # retorna a última linha executada
end

print media(10, 30)
```
---
## Definindo métodos
Valor padrão para argumentos
```
def media(value1, value2 = 6)
# ...
def media(value1 = 0, value2 = 6)
# ...
(irb)> media()
# 3
```
---
## Definindo métodos
Infinitos argumentos
--

```
def configure_servidor(servidor, *computadores)
  computadores.each do |computador|
    computador.servidor = servidor
  end
end

configure_servidor(minha_maquina, computador1, computador2, computador3)
```
--

```
def media(*values)
  values.reduce(:+) / values.size
end
```
---
## Methods
### E os blocos?

```
def tudo_valido?(lista, &validador)
{{content}}
```
--
  lista.each do |elemento|
    return false unless validador.call(elemento)
  end
  return true
end

{{content}}
--
resultado1 = tudo_valido?(["Dr. Fulano", "Dr. Sicrano"]) do |pro|
  pro.start_with?("Dr.")
end
puts resultado1 # true

{{content}}
--
resultado2 = tudo_valido?(["Dr. Fulano", "Mestre Sicrano"]) do |pro|
  pro.start_with?("Dr.")
end
puts resultado2 # false

---
## Methods
### E os blocos?

```
def tudo_valido?(lista)
  lista.each do |elemento|
    return false unless yield(elemento)
  end
  return true
end
```
--

```
block_given?
```
--

```
def tudo_valido?(lista)
  return true if lista.empty? || !block.given?
  lista.each do |elemento|
    return false unless yield(elemento)
  end
  return true
end
```
---
## DSL - Domain-Specific Language
## RSpec

```
describe Casa do
  it "should have a door" do
    subject.should have(1).door
  end
end
```
---
## Methods
### Objetos?
```
minha_media = method(:media)
puts minha_media.call(1,2,3) # 2
```
--

```
minha_media.class # Method
```
---
template: inverse
## Classe
---
## Classe  
```
meu_tecoteco = Aviao.new("ID7-2")
outro_tecoteco = Aviao.new("BZ-1")
{{content}}
```
--

meu_tecoteco.acelera(20)
meu_tecoteco.acelera(90)
outro_tecoteco.acelera(90)

meu_tecoteco.decola!
outro_tecoteco.decola!

{{content}}
--

print Aviao.quantidade        # 2
print meu_tecoteco.voando?    # true se a velocidade > 100
print outro_tecoteco.voando?  # false
--

```
class Aviao
{{content}}
end
```
--
  def initialize(registro)
    @registro = registro
  end
---
## Classe

### meu_tecoteco: variável local
--

### @registro: variável de instância
--

### @@contador: variável de classe
--

### $torre: variável global
---
## Classe: Avião
```
class Aviao
  @@contador = 0
  def initialize(registro)
    @registro = registro
    @velocidade = 0
    @@contador += 1
  end
{{content}}
end
```
--
  def self.quantidade # método de classe
    @@contador
  end
--

```
print Aviao.quantidade
```
---
## Classe: Aviao

```
class Aviao
  def initialize(registro)
    @registro = registro
    @velocidade = 0
    @@contador += 1
  end

  def self.quantidade # método de classe
    @@contador
  end

  def acelera(vel = 1)
    @velocidade += vel
  end
{{content}}
end
```
--
  def decola!
    @no_ar = true if vel > 100
  end
{{content}}
--
  def voando?
    @no_ar
  end
---
## Classe: Aviao

```
class Aviao
  @@contador = 0
  attr_accessor :registro, :velocidade, :no_ar

{{content}}
```
--
  def initialize(id)
    self.registro = id
    @velocidade = 0
    @@contador += 1
  end
{{content}}
--
  def self.quantidade; @@contador; end
  def acelera(vel = 1)
    @velocidade += vel
  end
  def decola!
    @no_ar = true if vel > 100
  end
  def voando?; 
    self.no_ar
  end
end

{{content}}
--
aviao = Aviao.new("test")
puts aviao.registro       # test
puts aviao.no_ar = true
puts aviao.voando?        # true
---
## Herança
--

### Classe Jato

* voa com velocidade maior que 200
* mesmo contador de Aviao

--

```
class Jato < Aviao
{{content}}
end

meu_jatinho = Jato.new("AZ-5")
meu_jatinho.acelera(150)
meu_jatinho.decola!
meu_jatinho.voando?
```
--
  def decola!
    @no_ar = true if vel > 200
  end
---
## Module
```
class Boat
  attr_accessor :velocidade
  # (...)
end
class Jato < Aviao
  attr_accessor :velocidade
  # (...)
end
```
--

### Nitro!
--

```
module Turbo
  def nitro!
    @velocidade += 200
  end
end
```
--

```
class Jato < Aviao
  include Turbo
end
class Barco
  include Turbo
end
```
---
## require
``` bash
projeto/lib/turbo.rb
projeto/lib/aviao.rb
```
--

``` bash
ruby -Ilib controle_aereo.rb
```
```
require 'turbo'
require 'aviao'
```
--

``` bash
ruby -I. controle_aereo.rb
```
```
require 'lib/turbo'
require 'lib/aviao'
```

---
template: inverse

# AÊ!

---
## References

### Books
[The Bastards Book of Ruby](http://ruby.bastardsbook.com/)  
[Programming Ruby](http://www.ruby-doc.org/docs/ProgrammingRuby/)  
[Mr. Neighborly's Humble Little Ruby Book](http://www.humblelittlerubybook.com/)

### Articles
[Tour de babel](https://sites.google.com/site/steveyegge2/tour-de-babel)  
[developerWorks interviews Matz](http://www.nt.ntnu.no/users/haugwarb/Programming/Ruby/ruby_features.html#h7)  
[The Difference Between Ruby Symbols and Strings](http://www.robertsosinski.com/2009/01/11/the-difference-between-ruby-symbols-and-strings/)

    </textarea>
    <div id="slideshow"></div>
  </body>
</html>
